(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))d(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&d(n)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function d(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();const c=()=>document.location.hash.replace(/^#\//,""),g=(o,t,r,d)=>{o.addEventListener(r,a=>{a.target.matches(t)&&d(a,o)})},s=(o,t)=>o.insertAdjacentHTML("afterbegin",t),u=(o,t)=>{o.replaceChildren(),s(o,t)};function l(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,o=>(o^crypto.getRandomValues(new Uint8Array(1))[0]&15>>o/4).toString(16))}const h=(o,t)=>{let r;return function(...a){const i=()=>{clearTimeout(r),o(...a)};clearTimeout(r),r=setTimeout(i,t)}},f=(o,t)=>{let r,d=0;return function(...i){const n=Date.now();n-d<t?(clearTimeout(r),r=setTimeout(()=>{o.apply(this,i),d=n},t)):(o.apply(this,i),d=n)}};class m extends EventTarget{constructor(t){super(),this.localStorageKey=t,this.todos=this.read(),this.handleCrossWindowEdit()}save(){localStorage.setItem(this.localStorageKey,JSON.stringify(this.todos)),this.dispatchEvent(new CustomEvent("save"))}read(){return JSON.parse(localStorage.getItem(this.localStorageKey)||"[]")}add(t){this.todos.push({id:l(),title:t.title,completed:!1}),this.save()}remove({id:t}){this.todos=this.todos.filter(r=>r.id!==t),this.save()}update(t){this.todos=this.todos.map(r=>r.id===t.id?t:r),this.save()}get(t){return this.todos.find(r=>r.id===t)}getByFilter(t){let r=[];switch(t){case"active":r=this.todos.filter(d=>!d.completed);break;case"completed":r=this.todos.filter(d=>d.completed);break;case"all":default:r=this.todos}return r}hasCompleted(){return this.todos.some(t=>t.completed)}hasAllCompleted(){return this.todos.every(t=>t.completed)}toggle({id:t}){this.todos=this.todos.map(r=>r.id===t?{...r,completed:!r.completed}:r),this.save()}clearCompleted(){this.todos=this.todos.filter(t=>!t.completed),this.save()}changeTodoIndex(t,r){const d=this.todos.findIndex(a=>a.id===t);if(d>-1){const[a]=this.todos.splice(d,1);this.todos.splice(r,0,a),this.save()}}handleCrossWindowEdit(){window.addEventListener("storage",()=>{this.read(),this.save()},!1)}}const e={Storage:null,$:{root:document.documentElement,themeToggle:document.querySelector('[data-todo="theme-toggle"]'),themeToggleCheckbox:document.querySelector('[data-todo="theme-toggle-checkbox"]'),moonIcon:document.querySelector('[data-todo="moon-icon"]'),sunIcon:document.querySelector('[data-todo="sun-icon"]'),input:document.querySelector('[data-todo="new"]'),list:document.querySelector('[data-todo="list"]'),footer:document.querySelector('[data-todo="footer"]'),dragAndDropDisclamer:document.querySelector('[data-todo="drag-and-drop-disclamer"]'),counter:document.querySelector('[data-todo="count"]'),filters:document.querySelectorAll('[data-todo="filters"] a'),clear:document.querySelector('[data-todo="clear-completed"]')},setActiveFilter(o){e.$.filters.forEach(t=>{t.matches(`[href="#/${o}"]`)?t.classList.add("active","font-bold","text-indigo-600"):t.classList.remove("active","font-bold","text-indigo-600")})},showList(o){e.$.list.style.display=o?"block":"none"},showFooter(o){e.$.footer.style.display=o?"flex":"none"},showDragAndDropDisclamer(o){e.$.dragAndDropDisclamer.style.display=o?"block":"none"},updateCounter(o){u(e.$.counter,`${o} ${o===1?"item":"items"} left`)},showClear(o){e.$.clear.style.display=o?"block":"none"},addTodoItem(){e.$.input.addEventListener("keyup",o=>{o.key==="Enter"&&o.target.value.length&&(e.Storage.add({id:l(),title:o.target.value,completed:!1}),e.$.input.value="")})},editTodoItem(o,t){t.classList.add("editing");const r=t.querySelector('[data-todo="edit"]');r.classList.remove("hidden"),r.focus()},createTodoItem(o){const t=document.createElement("li"),r=o.completed;return t.classList.add("group","relative","border-b","border-slate-300","bg-white","px-6","py-5","transition-colors","cursor-move","first:rounded-t-md","hover:border-indigo-400","dark:border-bright","dark:bg-ebony","hover:dark:border-indigo-600"),t.dataset.id=o.id,t.draggable=!0,s(t,`
        <div class="flex flex-row flex-nowrap items-center justify-start gap-4">
          <input
            class="toggle relative h-6 w-6 min-w-[24px] cursor-pointer appearance-none overflow-hidden rounded-full border border-solid border-snuff bg-transparent outline-none before:absolute before:left-0 before:top-1/3 before:h-1/2 before:w-[3px] before:origin-bottom-left before:translate-x-[10px] before:-rotate-45 before:bg-white before:opacity-0 before:content-[''] after:absolute after:left-0 after:bottom-[20%] after:h-[3px] after:w-3/4 after:origin-bottom-left after:translate-x-[10px] after:-rotate-45 after:bg-white after:opacity-0 after:content-[''] checked:border-transparent checked:bg-gradient checked:before:opacity-100 checked:after:opacity-100 hover:ring-2 hover:ring-indigo-600 hover:transition-colors focus-visible:ring-2 focus-visible:ring-indigo-600 dark:border-bright"
            data-todo="toggle"
            type="checkbox" ${r?"checked":""}>
          <label class="transition-colors break-all cursor-pointer grow text-lg text-mulled-wine dark:text-periwinkle-gray outline-none focus-visible:ring-2 focus-visible:ring-indigo-600 rounded-md
          ${r?"text-mischka dark:text-trout line-through":""}" tabindex="0" data-todo="label"></label>
          <button
            class="destroy pointer-events-none relative ml-auto h-5 w-5 min-w-[20px] opacity-0 outline-none transition-opacity before:absolute before:top-1/2 before:left-1/2 before:h-px before:w-full before:-translate-x-1/2 before:-translate-y-1/2 before:rotate-45 before:border before:border-solid before:border-slate-400 before:transition-colors before:content-[''] after:absolute after:top-1/2 after:left-1/2 after:h-px after:w-full after:-translate-x-1/2 after:-translate-y-1/2 after:-rotate-45 after:border after:border-solid after:border-slate-400 after:transition-colors after:content-[''] hover:before:border-indigo-600 hover:after:border-indigo-600 focus-visible:opacity-100 focus-visible:ring-2 focus-visible:ring-indigo-600 group-hover:pointer-events-auto group-hover:opacity-100 rounded-md"
            data-todo="remove"
          ></button>
        </div>
        <input
            class="absolute z-10 appearance-none inset-0 hidden h-full w-full rounded-md bg-white px-6 py-5 text-lg shadow-xl outline-none transition-colors placeholder:text-slate-500 focus:ring-2 focus:ring-indigo-600 dark:bg-ebony dark:text-slate-300 caret-indigo-600"
            data-todo="edit"
          />
      `),t.querySelector('[data-todo="label"]').textContent=o.title,t.querySelector('[data-todo="edit"]').value=o.title,t},handleTodoItemEvent(o,t,r){g(e.$.list,t,o,d=>{const a=d.target.closest("[data-id]");r(e.Storage.get(a.dataset.id),a,d)})},setInstances(){e.Storage=new m("TaskCascade")},setFilter(){e.filter=c()},toggleDark(){e.$.root.classList.add("dark"),e.$.moonIcon.classList.add("hidden"),e.$.sunIcon.classList.remove("hidden"),localStorage.theme="dark"},toggleLight(){e.$.root.classList.remove("dark"),e.$.sunIcon.classList.add("hidden"),e.$.moonIcon.classList.remove("hidden"),localStorage.theme="light"},bindEvents(){e.$.themeToggleCheckbox.addEventListener("change",o=>o.currentTarget.checked?e.toggleLight():e.toggleDark()),e.Storage.addEventListener("save",e.render),window.addEventListener("hashchange",()=>{e.setFilter(),e.render()}),e.addTodoItem(),e.handleTodoItemEvent("click",'[data-todo="toggle"]',o=>e.Storage.toggle(o)),e.handleTodoItemEvent("click",'[data-todo="remove"]',o=>e.Storage.remove(o)),e.handleTodoItemEvent("dblclick",'[data-todo="label"]',e.editTodoItem),e.handleTodoItemEvent("keyup",'[data-todo="label"]',(o,t,r)=>{r.key==="Enter"&&e.editTodoItem(o,t,r)}),e.handleTodoItemEvent("keyup",'[data-todo="edit"]',(o,t,r)=>{const d=t.querySelector('[data-todo="edit"]');r.key==="Enter"&&d.value&&(t.classList.remove("editing"),d.classList.add("hidden"),e.Storage.update({...o,title:d.value})),r.key==="Escape"&&document.activeElement.blur()}),e.handleTodoItemEvent("focusout",'[data-todo="edit"]',(o,t)=>{t.classList.contains("editing")&&e.render()}),e.$.clear.addEventListener("click",()=>{e.Storage.clearCompleted()}),e.handleDragAndDrop()},setTheme(){localStorage.theme==="dark"||!("theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?(e.toggleDark(),e.$.themeToggleCheckbox.dispatchEvent(new Event("change"))):e.toggleLight()},render(){const o=e.Storage.getByFilter("all").length;e.setActiveFilter(e.filter),e.$.list.replaceChildren(...e.Storage.getByFilter(e.filter).map(t=>e.createTodoItem(t))),e.showList(o),e.showFooter(o),e.showDragAndDropDisclamer(o),e.updateCounter(e.Storage.getByFilter("active").length),e.showClear(e.Storage.hasCompleted())},handleDragAndDrop(){let o=null;e.handleTodoItemEvent("dragstart","[data-id]",(t,r)=>{r.classList.add("dragging"),o=r}),e.handleTodoItemEvent("dragend","[data-id]",(t,r)=>{r.classList.remove("dragging"),o=null}),e.$.list.addEventListener("dragover",h(f(t=>{if(t.preventDefault(),!o)return;const r=t.clientY,d=[...e.$.list.querySelectorAll("[data-id]:not(.dragging)")].find(i=>r<i.getBoundingClientRect().top+i.offsetHeight/2),a=d?d.dataset.id:e.$.list.lastChild.dataset.id;e.$.list.insertBefore(o,d),e.Storage.changeTodoIndex(o.dataset.id,e.Storage.todos.findIndex(i=>i.id===a))},100)),100),e.$.list.addEventListener("dragenter",t=>t.preventDefault())},init(){e.setTheme(),e.setInstances(),e.setFilter(),e.bindEvents(),e.render()}};e.init();
